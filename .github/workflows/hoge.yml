name: hoge

on:
  push:
    branches:
      - feature/test
env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
jobs:
  git-event:
    timeout-minutes: 1
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: event
        env:
          HOGE: ${{ github.event.push.after }}
        run: |
          echo $HOGE
          FUGA=aaao
          echo $FUGA
          echo ${{ github.event.push.base_ref }}
          echo ${{ github.event.push.before }}
          echo ${{ github.event.push.commits }}
          echo ${{ github.event.push.compare }}
  git-get:
    timeout-minutes: 1
    runs-on: ubuntu-latest
    outputs:
      protect: ${{ steps.get-data.outputs.protect }}
    steps:
      - uses: actions/checkout@v3
      - name: get
        id: get-data
        run: echo "protect=$(bash .github/get.sh)" >> $GITHUB_OUTPUT

  git-echo:
    timeout-minutes: 1
    runs-on: ubuntu-latest
    needs: git-get
    steps:
      - uses: actions/checkout@v3
      - name: json stringify
        env:
          MESSAGE: "ブランチプロテクションの有効化に失敗しました(release)\\nProtect:"
        run: |
          echo request body : ${{ needs.git-get.outputs.protect }}
          bash .github/post.sh
